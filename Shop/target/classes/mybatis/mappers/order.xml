<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mappers.order">

	<resultMap id="orderResult" type="orderVO"> 
		<result property="order_num" column="order_num" />
		<result property="totalPrice" column="total_Price" />
		<result property="apply_num" column="apply_num" />
		<result property="order_status" column="order_status" />
		<result property="pg" column="pg" />
		<result property="paid_at" column="paid_at" />
		<result property="member_id" column="member_id" /> 
		<result property="member_name" column="member_name" />
		<result property="email" column="email" />
		<result property="phone" column="phone" />
		<result property="address" column="address" />
		<result property="zipNo" column="zipNo" />
		<result property="order_date" column="order_date" />
		<result property="delivery_request" column="delivery_request" />
	</resultMap>	
	

	<insert id="insertNewOrder" parameterType="orderVO">
		<![CDATA[
			insert into orders(order_num,
								total_Price,
								apply_num,
								order_status,
								pg,
								paid_at,
								order_date,
								member_id,
								member_name,
								email,
								phone,
								address,
								zipNo,
								delivery_request) values(
								#{order_num},
								#{totalPrice},
								#{apply_num},
								#{order_status},
								#{pg},
								#{paid_at},
								#{order_date},
								#{member_id},
								#{member_name},
								#{email},
								#{phone},
								#{address},  
								#{zipNo},
								#{delivery_request})
								   ]]>
		
	</insert>
	
	<!-- 내 주문 조회 -->
	<select id="listOrderList" resultMap="orderResult"
		parameterType="String">
	 <![CDATA[
		select * from orders
			where member_id = #{member_id}
			order by order_date desc
			
    	]]>
	</select>
	
	
</mapper>